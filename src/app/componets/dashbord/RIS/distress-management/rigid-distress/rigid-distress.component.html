<app-page-header
  title="Rigid Distress"
  title1="Rigid Distress"
  activeTitle="Rigid Distress"
></app-page-header>

<div class="row">
  <div class="col-xl-12">
    <app-showcode-card [title]="'Rigid Distress'" [prism]="prismCode.table18">
      <div
        class="d-flex align-items-center justify-content-between my-1 page-header-breadcrumb flex-wrap gap-2"
      >
        <!-- <div class="d-flex align-items-center gap-2 flex-wrap w-100">
                    <select class="form-select" style="width: auto; min-width: 200px;">
                        <option value="" selected disabled>Select Road</option>
                        @for (row of geometryList; track $index) {
                            <option value="{{row.geometry_data_id}}">{{row.name_of_road}}</option>
                        }
                    </select>
                    <input type="date" class="form-control" style="width: auto; min-width: 200px;">
                    <input type="date" class="form-control" style="width: auto; min-width: 200px;">
                </div>

                <div class="btn-list">
                    <a href="javascript:void(0);" class="btn btn-primary-light btn-wave me-2" routerLink="/ris/road-manage/add-rigid-distress"> <i class="bx bx-plus align-middle"></i> Add Rigid Distress</a>
                
                </div> -->
        <form
          [formGroup]="filterForm"
          (ngSubmit)="filterDistress()"
          class="d-flex align-items-center gap-2 flex-wrap w-100"
        >
          <select
            class="form-select"
            style="width: auto; min-width: 200px"
            id="geometry_data_id"
            formControlName="geometry_data_id"
          >
            <option value="null" selected disabled>Select Road</option>
            @for (row of geometryList; track $index) {
            <option value="{{ row.geometry_data_id }}">
              {{ row.name_of_road }}
            </option>
            }</select
          >&nbsp;&nbsp;
          <label>From</label>
          <input
            type="date"
            class="form-control"
            style="width: auto; min-width: 200px"
            id="start_date"
            formControlName="start_date"
          />
          <label>TO</label>
          <input
            type="date"
            class="form-control"
            style="width: auto; min-width: 200px"
            id="end_date"
            formControlName="end_date"
          />
          <button type="submit" class="btn btn-primary">filter</button>
          <button
            type="reset"
            class="btn btn-secondary"
            (click)="resetFilter()"
          >
            Reset
          </button>

          <!-- Use ms-auto to push the button to the right -->
          <div class="btn-list ms-auto">
            <a
              href="javascript:void(0);"
              class="btn btn-primary-light btn-wave"
              routerLink="/ris/road-manage/add-rigid-distress"
            >
              <i class="bx bx-plus align-middle"></i> Add Rigid Distress
            </a>
          </div>
        </form>
      </div>
      <div class="table-responsive">
        <table class="table text-nowrap">
          <thead class="table-primary">
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Road Name</th>
              <th scope="col">Chainage Start (KM)</th>
              <th scope="col">Chainage End (KM)</th>
              <th scope="col">Direction</th>
              <th scope="col">Total Length (KM)</th>
              <th scope="col">No. of Entries</th>
              <th scope="col">Created On</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            @for (row of tableData; track $index) {
            <tr>
              <td>{{ row.rigid_distress_id }}</td>
              <td>{{ row.name_of_road || "N/A" }}</td>
              <td>{{ row.chainage_start }}</td>
              <td>{{ row.chainage_end }}</td>
              <td>{{ row.direction || "N/A" }}</td>
              <td>{{ row.total_length || "N/A" }}</td>
              <td>
                <span class="badge bg-info"
                  >{{ row.entries_count || 0 }} entries</span
                >
              </td>
              <td>{{ row.created_on | date : "yyyy-MM-dd HH:mm" }}</td>
              <td>
                <div class="hstack gap-2 fs-15">
                  <a
                    href="javascript:void(0);"
                    title="View"
                    [routerLink]="[
                      '/ris/road-manage/view-rigid-distress',
                      row.rigid_distress_id
                    ]"
                    class="btn btn-icon btn-sm btn-success-transparent rounded-pill"
                    ><i class="ri-eye-line"></i
                  ></a>

                  <a
                    href="javascript:void(0);"
                    title="Edit"
                    [routerLink]="[
                      '/ris/road-manage/edit-rigid-distress',
                      row.rigid_distress_id
                    ]"
                    class="btn btn-icon btn-sm btn-info-transparent rounded-pill"
                    ><i class="ri-edit-line"></i
                  ></a>

                  <a
                    href="javascript:void(0);"
                    title="Delete"
                    data-bs-toggle="modal"
                    (click)="open(content, row.rigid_distress_id)"
                    data-bs-target="#exampleModal"
                    class="btn btn-icon btn-sm btn-danger-transparent rounded-pill"
                    ><i class="ri-delete-bin-line"></i
                  ></a>
                </div>
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    </app-showcode-card>
  </div>
</div>

<!-- delete -->
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <ng-template #content let-c="close" let-d="dismiss">
        <div class="modal-header">
          <h6 class="modal-title" id="exampleModalLabel1">Confirme</h6>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            (click)="d('Cross click')"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">Are you sure you want to delete?</div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-primary"
            (click)="c('Closelick')"
            (click)="delete()"
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="c('Closelick')"
            data-bs-dismiss="modal"
          >
            No
          </button>
        </div>
      </ng-template>
    </div>
  </div>
</div>
