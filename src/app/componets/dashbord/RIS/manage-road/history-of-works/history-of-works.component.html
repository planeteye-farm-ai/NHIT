<app-page-header
  title="History Of Works"
  title1="History Of Works"
  activeTitle="History Of Works"
></app-page-header>

<div class="row">
  <div class="col-xl-12">
    <app-showcode-card
      [title]="'History Works of ' + roadName"
      [prism]="prismCode.table18"
    >
      <div
        class="d-flex align-items-center justify-content-between my-1 page-header-breadcrumb flex-wrap gap-2"
      >
        <div>
          <!-- <h1 class="page-title fw-medium fs-18 mb-2">Distress</h1> -->
        </div>
        <div class="btn-list">
          <a
            href="javascript:void(0);"
            class="btn btn-primary-light btn-wave me-2"
            [routerLink]="['/ris/road-manage/add-history-of-work', roadId]"
          >
            <i class="bx bx-plus align-middle"></i>Add History Of Works</a
          >
          <!-- <app-add-distress></app-add-distress> -->
        </div>
      </div>
      <div class="table-responsive">
        <table class="table text-nowrap">
          <thead class="table-primary">
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Chainage Range</th>
              <th scope="col">Direction</th>
              <th scope="col">Type of Work</th>
              <th scope="col">Contractor</th>
              <th scope="col">Asset Type</th>
              <th scope="col">Work Status</th>
              <th scope="col">Work Period</th>
              <th scope="col">Created On</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            @for (row of tableData; track $index) {
            <tr>
              <td>{{ row.history_of_work_id || row.history_of_works_id }}</td>
              <td>
                <span class="fw-semibold">{{ row.chainage_start }}</span>
                <span class="text-muted mx-1">-</span>
                <span class="fw-semibold">{{ row.chainage_end }}</span>
              </td>
              <td>{{ row.direction || "-" }}</td>
              <td>{{ row.type_of_work || "-" }}</td>
              <td>{{ row.name_of_contractor || "-" }}</td>
              <td>{{ row.asset_type || "-" }}</td>
              <td>
                @if(row.work_status === 'Completed') {
                <span class="badge bg-success">{{ row.work_status }}</span>
                } @else if(row.work_status === 'In Progress') {
                <span class="badge bg-primary">{{ row.work_status }}</span>
                } @else if(row.work_status === 'Not Started') {
                <span class="badge bg-secondary">{{ row.work_status }}</span>
                } @else if(row.work_status === 'On Hold') {
                <span class="badge bg-warning">{{ row.work_status }}</span>
                } @else if(row.work_status === 'Cancelled') {
                <span class="badge bg-danger">{{ row.work_status }}</span>
                } @else {
                <span>{{ row.work_status || "-" }}</span>
                }
              </td>
              <td>
                <small>
                  {{ row.work_start_date | date : "yyyy-MM-dd" }}
                  <span class="text-muted">to</span>
                  {{ row.work_end_date | date : "yyyy-MM-dd" }}
                </small>
              </td>
              <td>{{ row.created_on | date : "yyyy-MM-dd" }}</td>
              <td>
                <div class="hstack gap-2 fs-15">
                  <a
                    href="javascript:void(0);"
                    title="View"
                    [routerLink]="[
                      '/ris/road-manage/view-history-of-work',
                      row.history_of_work_id || row.history_of_works_id
                    ]"
                    class="btn btn-icon btn-sm btn-success-transparent rounded-pill"
                    ><i class="ri-eye-line"></i
                  ></a>

                  <a
                    href="javascript:void(0);"
                    title="Edit"
                    [routerLink]="[
                      '/ris/road-manage/edit-history-of-work',
                      row.history_of_work_id || row.history_of_works_id
                    ]"
                    class="btn btn-icon btn-sm btn-info-transparent rounded-pill"
                    ><i class="ri-edit-line"></i
                  ></a>

                  <a
                    href="javascript:void(0);"
                    title="Pdf"
                    [routerLink]="[
                      '/ris/road-manage/history-of-work-pdf',
                      row.history_of_work_id || row.history_of_works_id
                    ]"
                    class="btn btn-icon btn-sm btn-info-transparent rounded-pill"
                    ><i class="ri-file-line"></i
                  ></a>

                  <a
                    href="javascript:void(0);"
                    title="Delete"
                    data-bs-toggle="modal"
                    (click)="
                      open(
                        content,
                        row.history_of_work_id || row.history_of_works_id
                      )
                    "
                    data-bs-target="#exampleModal"
                    class="btn btn-icon btn-sm btn-danger-transparent rounded-pill"
                    ><i class="ri-delete-bin-line"></i
                  ></a>
                </div>
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>
    </app-showcode-card>
  </div>
</div>

<!-- delete -->
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <ng-template #content let-c="close" let-d="dismiss">
        <div class="modal-header">
          <h6 class="modal-title" id="exampleModalLabel1">Confirme</h6>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            (click)="d('Cross click')"
            aria-label="Close"
          ></button>
        </div>
        <div class="modal-body">Are you sure you want to delete?</div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-primary"
            (click)="c('Closelick')"
            (click)="delete()"
          >
            Yes
          </button>
          <button
            type="button"
            class="btn btn-secondary"
            (click)="c('Closelick')"
            data-bs-dismiss="modal"
          >
            No
          </button>
        </div>
      </ng-template>
    </div>
  </div>
</div>
