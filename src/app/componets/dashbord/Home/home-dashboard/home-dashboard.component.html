<!-- <app-page-header title="Information System" title1="Information System" activeTitle="Information System"></app-page-header> -->
<!-- Page Header -->
<div
  class="d-flex align-items-center justify-content-between my-4 page-header-breadcrumb flex-wrap gap-2"
>
  <div>
    <h3 class="fw-medium fs-20 mb-0 mt-0">
      Road Asset Management System (RAMS)
    </h3>
  </div>
</div>

<!-- Selected project banner -->
<div *ngIf="projectSelection.selectedProject" class="project-selection-banner mb-3">
  <span class="project-selection-banner-text">
    <strong>{{ projectSelection.selectedProject }}</strong> is selected for all dashboards.
  </span>
</div>

<!-- Start::row-1 -->
<div class="row project-cards-row">
  <div class="col-md-12 col-xl-12">
    <div class="row g-4">
      <ng-container *ngFor="let projectName of projectNames; let i = index">
        <div
          class="col-sm-6 col-lg-4 col-xl-3"
          (click)="selectProject(projectName)"
        >
          <div
            class="project-card project-card-modern"
            [class.project-card-selected]="isProjectSelected(projectName)"
            [attr.data-index]="i"
          >
            <div class="project-card-body">
              <div class="project-card-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
                  <polyline points="9 22 9 12 15 12 15 22"/>
                </svg>
              </div>
              <h3 class="project-card-title">{{ projectName }}</h3>
              <div class="project-card-cta">
                <ng-container *ngIf="!projectCardsLoading; else systemLoadingTpl">
                  <span *ngIf="!isProjectSelected(projectName)">Select for all dashboards</span>
                  <span *ngIf="isProjectSelected(projectName)" class="project-card-selected-label">✓ Selected</span>
                  <svg *ngIf="!isProjectSelected(projectName)" class="project-card-arrow" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="5" y1="12" x2="19" y2="12"/>
                    <polyline points="12 5 19 12 12 19"/>
                  </svg>
                </ng-container>
              </div>
              <div *ngIf="projectCardsError" class="project-card-error">
                {{ projectCardsError }}
              </div>
            </div>
          </div>
        </div>
      </ng-container>

      <!-- Placeholder cards if fewer than 8 projects -->
      <ng-container *ngIf="projectNames.length < 8 && !projectCardsLoading">
        <ng-container *ngFor="let _ of placeholderCount">
          <div class="col-sm-6 col-lg-4 col-xl-3">
            <div class="project-card project-card-modern project-card-placeholder">
              <div class="project-card-body">
                <div class="project-card-icon project-card-icon-muted">
                  <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                  </svg>
                </div>
                <h3 class="project-card-title">—</h3>
                <span class="project-card-cta-muted">No project</span>
              </div>
            </div>
          </div>
        </ng-container>
      </ng-container>
    </div>
  </div>
</div>

<ng-template #systemLoadingTpl>
  <div class="system-loading">
    <span class="skeleton-line"></span>
    <span class="skeleton-line w-75"></span>
  </div>
</ng-template>
